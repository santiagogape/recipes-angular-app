// app.routes.ts
import { Routes } from '@angular/router';
import { inject } from '@angular/core';
import { PlatformService } from './services/platform.service';

// Importa todos tus componentes necesarios...
import { HomeComponent } from '@pages/home/home.component';
import { AboutUsComponent } from '@pages/about.us/about.us.component';
import { RecipesComponent } from '@pages/recipes/recipes.component';
import { MyRecipesComponent } from '@pages/my/recipes/my.recipes.component';
import { RecipeComponent } from '@pages/recipes/recipe/recipe.component';
import { SignUpComponent } from '@pages/sign-up/sign-up.component';
import { SignInComponent } from '@pages/sign-in/sign-in.component';
import { ProfileComponent } from '@pages/my/profile/profile.component';
import { authGuard } from './guards/auth.guard';

export const routes: Routes = (() => {
  const isAndroid = inject(PlatformService).isAndroid();

  if (isAndroid) {
    return [
      { path: '', redirectTo: 'home', pathMatch: 'full' },
      { path: 'home', component: HomeComponent },
      { path: 'sign-up', component: SignUpComponent },
      { path: 'sign-in', component: SignInComponent },
      { path: 'my/recipes', component: MyRecipesComponent, canActivate: [authGuard] },
      { path: 'my/favourites', loadComponent: () => import('@pages/my/favourites/favourites.component').then(m => m.FavouritesComponent), canActivate: [authGuard] },
    ];
  }

  return [
    { path: '', redirectTo: 'home', pathMatch: 'full' },
    { path: 'home', component: HomeComponent },
    { path: 'about', component: AboutUsComponent },
    { path: 'recipes', component: RecipesComponent },
    { path: 'recipes/page', component: RecipeComponent },
    { path: 'recipe', component: RecipeComponent },
    { path: 'sign-up', component: SignUpComponent },
    { path: 'sign-in', component: SignInComponent },
    { path: 'my/recipes', component: MyRecipesComponent, canActivate: [authGuard] },
    { path: 'my/profile', component: ProfileComponent, canActivate: [authGuard] },
  ];
})();
